/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ProjectTasks
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// helpers.ts
var BLOCK_BOUNDARY = /^#+\s/;
var DEBUG = true;
var DEFAULT_SETTINGS = {
  idPrefixMethod: "1" /* UsePrefix */,
  projectPrefix: "prj",
  randomIDLength: 6,
  sequentialStartNumber: 1,
  removeVowels: false,
  firstLettersOfWords: false,
  automaticTagNames: ["Project"],
  clearAllTags: false,
  nestedTaskBehavior: "1" /* ParallelExecution */
};
var ParsedLine = class {
  constructor(is_task, status_type, line_text, nesting) {
    this.is_task = is_task;
    this.status_type = status_type;
    this.line_text = line_text;
    this.nesting = nesting;
    if (this.is_task) {
      let indents = "	".repeat(nesting);
      this.task_prefix = `${indents}- [${status_type}] `;
    } else {
      this.task_prefix = "";
    }
  }
  getLineSplit(line) {
    return line.split(/(\s+)/);
  }
  removeAllTags() {
    return this.removeTags();
  }
  removeTags(tags_to_remove) {
    let words = this.getLineSplit(this.line_text);
    for (let idx = 0; idx < words.length; idx++) {
      let word = words[idx];
      if (word.trim().length != 0) {
        let is_valid_tag = word.startsWith("#") && (!tags_to_remove || tags_to_remove.indexOf(word.slice(1)) >= 0);
        if (is_valid_tag) {
          words[idx] = "";
          if (idx != 0) {
            words[idx - 1] = "";
          } else if (idx != words.length - 1) {
            words[idx + 1] = "";
          }
        }
      } else {
        if (idx == words.length - 1) {
          words[idx] = "";
        }
      }
    }
    return words.join("");
  }
};
var Helper = class {
  // Simple helper class that contains the business logic
  // of the app. This is extracted here to allow unit testing
  constructor() {
  }
  static getNestingLevel(task_marker) {
    let parts = task_marker.replaceAll("\n", "").split("-");
    return parts[0].length;
  }
  static generateRandomDigits(length) {
    const digits = "0123456789";
    let randomString = "";
    for (let i = 0; i < length; i++) {
      const randomIndex = Math.floor(Math.random() * digits.length);
      randomString += digits[randomIndex];
    }
    return randomString;
  }
  static getPrefixFromString(text, first_letters, remove_vowels) {
    text = text.replaceAll(/[#\[\]]/g, "");
    let words = text.split(/\s+/);
    text = "";
    for (let word of words) {
      if (word) {
        text = `${text}${word[0].toUpperCase()}`;
        if (!first_letters) {
          let remainder = word.slice(1);
          if (remove_vowels) {
            remainder = remainder.replaceAll(/[aeiou]/g, "");
          }
          text = `${text}${remainder}`;
        }
      }
    }
    text = text.replaceAll(" ", "");
    return text;
  }
  static clearBlockIDs(sel, automatic_tags, clear_all_tags) {
    let remove_id = /ðŸ†”\s[\w,]+[ \t]*/g;
    sel = sel.replaceAll(remove_id, "");
    let remove_block = /â›”\s[\w,]+[ \t]*/g;
    sel = sel.replaceAll(remove_block, "");
    let cleaned_text = [];
    for (let line of sel.split(/\r?\n/)) {
      let parsed = this.parseLine(line);
      if (parsed.is_task) {
        if (clear_all_tags) {
          cleaned_text.push(parsed.task_prefix + parsed.removeAllTags());
        } else {
          cleaned_text.push(parsed.task_prefix + parsed.removeTags(automatic_tags));
        }
      } else {
        cleaned_text.push(parsed.line_text);
      }
    }
    return cleaned_text.join("\n");
  }
  static getBlockEnd(editor) {
    let blockEnd = editor.getCursor().line;
    if (blockEnd >= editor.lineCount() - 1)
      return blockEnd + 1;
    blockEnd += 1;
    while (!BLOCK_BOUNDARY.test(editor.getLine(blockEnd))) {
      blockEnd++;
      if (blockEnd > editor.lineCount() - 1)
        return blockEnd;
    }
    return blockEnd;
  }
  static getBlockStart(editor) {
    let blockStart = editor.getCursor().line;
    if (BLOCK_BOUNDARY.test(editor.getLine(blockStart))) {
      return Math.min(editor.lineCount() - 1, blockStart + 1);
    }
    while (blockStart > 0 && !BLOCK_BOUNDARY.test(editor.getLine(blockStart - 1))) {
      blockStart--;
    }
    return blockStart;
  }
  static getAllBlockStarts(editor) {
    let blocks = [0];
    let section = /^#?\s\w+/;
    for (let line_number = 0; line_number < editor.lineCount(); line_number++) {
      if (section.test(editor.getLine(line_number))) {
        if (line_number > 0) {
          blocks.push(line_number);
        }
      }
    }
    return blocks;
  }
  static getSectionName(editor, file_name) {
    let section_start = Helper.getBlockStart(editor);
    if (section_start == 0) {
      return file_name;
    } else {
      return editor.getLine(section_start - 1);
    }
  }
  static addTaskIDs(sel, prefix, automatic_tags, parallel, use_prefix, random_id_length, sequential_start) {
    sel = Helper.clearBlockIDs(sel, automatic_tags, false);
    if (DEBUG)
      console.log(`Replaced ids and blocks to give: ${sel}`);
    let lines = "";
    let first = true;
    let idx = 0;
    let nesting_ids = ["0:ERROR!"];
    let current_nesting = 0;
    let is_parallel = false;
    let this_id;
    for (const line of sel.split(/\r?\n/)) {
      let match = this.parseLine(line);
      if (!first) {
        lines += "\n";
      }
      if (match.is_task) {
        if (parallel) {
          let nesting_depth = match.nesting;
          if (nesting_depth > current_nesting) {
            current_nesting += 1;
            is_parallel = true;
            nesting_ids.push(``);
          } else if (nesting_depth < current_nesting) {
            while (current_nesting > nesting_depth) {
              current_nesting -= 1;
              let nested = nesting_ids.pop();
              if (nested) {
                nesting_ids[nesting_ids.length - 1] += `,${nested}`;
              }
              is_parallel = current_nesting > 0;
            }
          }
        }
        let this_line;
        if (use_prefix) {
          this_id = `${prefix}${Helper.generateRandomDigits(random_id_length)}`;
        } else {
          this_id = `${prefix}${idx + sequential_start}`;
        }
        let cleaned_line = match.line_text;
        if (cleaned_line != "")
          cleaned_line += " ";
        this_line = `${match.task_prefix}${cleaned_line}\u{1F194} ${this_id}`;
        if (idx > 0) {
          if (is_parallel) {
            this_line += ` \u26D4 ${nesting_ids[current_nesting - 1]}`;
          } else {
            this_line += ` \u26D4 ${nesting_ids[nesting_ids.length - 1]}`;
          }
        }
        for (const tag of automatic_tags) {
          let tag_text = ` #${tag}`;
          if (this_line.indexOf(tag_text) < 0) {
            this_line += tag_text;
          }
        }
        lines += this_line;
        idx += 1;
        if (is_parallel) {
          if (nesting_ids[nesting_ids.length - 1])
            nesting_ids[nesting_ids.length - 1] += ",";
          nesting_ids[nesting_ids.length - 1] += `${this_id}`;
        } else {
          nesting_ids[nesting_ids.length - 1] = this_id;
        }
        if (DEBUG)
          console.log(`Nesting level ${current_nesting}, ids ${nesting_ids}`);
      } else {
        lines += match.line_text;
      }
      first = false;
    }
    return lines;
  }
  static doBlockUpdate(editor, add_ids, filename, automatic_tags, prefix, parallel, use_prefix, random_id_length, sequential_start, clear_all_tags) {
    const cursor = editor.getCursor();
    const line = editor.getLine(cursor.line);
    let blockStart = Helper.getBlockStart(editor);
    let blockEnd = Helper.getBlockEnd(editor);
    let last_line_length = editor.getLine(blockEnd + 1).length;
    const blockContent = editor.getRange({ line: blockStart, ch: 0 }, { line: blockEnd, ch: last_line_length });
    if (DEBUG)
      console.log(`Start ${blockStart}, End ${blockEnd}, last length ${last_line_length}
Orig: ${blockContent}`);
    let lines;
    if (add_ids) {
      lines = Helper.addTaskIDs(blockContent, prefix, automatic_tags, parallel, use_prefix, random_id_length, sequential_start);
    } else {
      lines = Helper.clearBlockIDs(blockContent, automatic_tags, clear_all_tags);
    }
    if (DEBUG)
      console.log(`Start ${blockStart}, End ${blockEnd}, last length ${last_line_length}
Orig: ${blockContent}
New: ${lines}`);
    editor.replaceRange(lines, { line: blockStart, ch: 0 }, { line: blockEnd, ch: last_line_length });
  }
  static getEntireConvertedFile(editor, filename, automatic_tags, prefix, parallel, use_prefix, random_id_length, sequential_start, clear_all_tags) {
    return "";
  }
  static parseLine(line) {
    const regex = /^(\s*-\s\[([ x\-\/])\]\s)?(.*)$/;
    let match = regex.exec(line);
    if (match) {
      if (match[1]) {
        return new ParsedLine(true, match[2], match[3], this.getNestingLevel(line));
      } else {
        return new ParsedLine(false, "", match[3], 0);
      }
    } else {
      throw new Error(`Line was not understood: "${line}"`);
    }
  }
};

// main.ts
var DEBUG2 = true;
var ProjectTasks = class extends import_obsidian.Plugin {
  async onload() {
    if (DEBUG2)
      console.log("Project Tasks starting");
    await this.loadSettings();
    this.addCommand({
      id: "set-ids",
      name: "Set project ids on Selection",
      editorCallback: (editor, view) => {
        let sel = editor.getSelection();
        let lines = Helper.addTaskIDs(sel, this.getPrefix(editor, view), this.settings.automaticTagNames, this.settings.nestedTaskBehavior == "1" /* ParallelExecution */, this.settings.idPrefixMethod == "1" /* UsePrefix */, this.settings.randomIDLength, this.settings.sequentialStartNumber);
        editor.replaceSelection(
          `${lines}`
        );
      }
    });
    this.addCommand({
      id: "clear-ids",
      name: "Clear project ids on Selection",
      editorCallback: (editor, view) => {
        let sel = editor.getSelection();
        let lines = Helper.clearBlockIDs(sel, this.settings.automaticTagNames, this.settings.clearAllTags);
        editor.replaceSelection(
          `${lines}`
        );
      }
    });
    this.addCommand({
      id: "set-ids-block",
      name: "Set project ids on Block",
      editorCallback: (editor, view) => {
        this.blockUpdate(editor, this.getPrefix(editor, view), true);
      }
    });
    this.addCommand({
      id: "clear-ids-block",
      name: "Clear project ids on Block",
      editorCallback: (editor, view) => {
        this.blockUpdate(editor, this.getPrefix(editor, view), false);
      }
    });
    this.addCommand({
      id: "add-project-task-list",
      name: "Add active project task list",
      editorCallback: (editor, view) => {
        this.addActiveProjectList(editor);
      }
    });
    this.addCommand({
      id: "clear-ids-file",
      name: "Clear project ids in entire file",
      editorCallback: (editor, view) => {
        let last_line = editor.lineCount();
        let range_from = { line: 0, ch: 0 };
        let range_to = { line: last_line, ch: editor.getLine(last_line).length };
        let sel = editor.getRange(range_from, range_to);
        let lines = Helper.clearBlockIDs(sel, this.settings.automaticTagNames, this.settings.clearAllTags);
        editor.replaceRange(
          `${lines}`,
          range_from,
          range_to
        );
      }
    });
    this.addSettingTab(new ProjectTasksSettingsTab(this.app, this));
  }
  addActiveProjectList(editor) {
    const active_tasks_view = `\`\`\`tasks
tags includes #${this.settings.automaticTagNames}
not done
hide backlink
is not blocked
\`\`\``;
    editor.replaceSelection(active_tasks_view);
  }
  blockUpdate(editor, prefix, add_ids) {
    const cursor = editor.getCursor();
    const line = editor.getLine(cursor.line);
    let blockStart = Helper.getBlockStart(editor);
    let blockEnd = Helper.getBlockEnd(editor);
    let last_line_length = editor.getLine(blockEnd + 1).length;
    const blockContent = editor.getRange({ line: blockStart, ch: 0 }, { line: blockEnd, ch: last_line_length });
    if (DEBUG2)
      console.log(`Start ${blockStart}, End ${blockEnd}, last length ${last_line_length}
Orig: ${blockContent}`);
    let lines;
    if (add_ids) {
      lines = Helper.addTaskIDs(blockContent, prefix, this.settings.automaticTagNames, this.settings.nestedTaskBehavior == "1" /* ParallelExecution */, this.settings.idPrefixMethod == "1" /* UsePrefix */, this.settings.randomIDLength, this.settings.sequentialStartNumber);
    } else {
      lines = Helper.clearBlockIDs(blockContent, this.settings.automaticTagNames, this.settings.clearAllTags);
    }
    if (DEBUG2)
      console.log(`Start ${blockStart}, End ${blockEnd}, last length ${last_line_length}
Orig: ${blockContent}
New: ${lines}`);
    editor.replaceRange(lines, { line: blockStart, ch: 0 }, { line: blockEnd, ch: last_line_length });
  }
  getPrefix(editor, view) {
    let raw_prefix;
    switch (this.settings.idPrefixMethod) {
      case "1" /* UsePrefix */: {
        raw_prefix = this.settings.projectPrefix;
        break;
      }
      case "3" /* FileName */: {
        raw_prefix = this.getFilename(view);
        break;
      }
      case "2" /* SectionName */: {
        raw_prefix = Helper.getSectionName(editor, this.getFilename(view));
      }
    }
    return Helper.getPrefixFromString(raw_prefix, this.settings.firstLettersOfWords, this.settings.removeVowels);
  }
  getFilename(view) {
    var _a;
    if (!((_a = view.file) == null ? void 0 : _a.name)) {
      return this.settings.projectPrefix;
    } else {
      return view.file.name.split(".")[0];
    }
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ProjectTasksSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Project ID method").setDesc("Choose how the ID will be determined").addDropdown((dropDown) => {
      dropDown.addOption("1", "Use prefix");
      dropDown.addOption("2", "Use Section name");
      dropDown.addOption("3", "Use filename").setValue(this.plugin.settings.idPrefixMethod).onChange(async (value) => {
        this.plugin.settings.idPrefixMethod = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Project ID prefix").setDesc("Prefix to use when creating an ID for a task").addText((text) => text.setPlaceholder("ID prefix").setValue(this.plugin.settings.projectPrefix).onChange(async (value) => {
      this.plugin.settings.projectPrefix = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Length of random ID number").setDesc("How many digits to use for random ID when using a fixed prefix").addSlider((text) => text.setValue(this.plugin.settings.randomIDLength).setLimits(3, 6, 1).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.randomIDLength = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Initial sequential ID number").setDesc("Start number for sequential ID's").addSlider((text) => text.setValue(this.plugin.settings.sequentialStartNumber).setLimits(0, 1, 1).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.sequentialStartNumber = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Remove vowels").setDesc("Remove vowels from the prefix when getting from the filename or block name").addToggle((text) => text.setValue(this.plugin.settings.removeVowels).onChange(async (value) => {
      this.plugin.settings.removeVowels = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("First letter of words").setDesc("Only use the first letter of words to form the prefix").addToggle((text) => text.setValue(this.plugin.settings.firstLettersOfWords).onChange(async (value) => {
      this.plugin.settings.firstLettersOfWords = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Automatically add tags").setDesc("A list of tags (one per line) to add to each task - do not include the # symbol").addTextArea((text) => {
      text.setValue(this.plugin.settings.automaticTagNames.join("\n")).onChange((value) => {
        this.plugin.settings.automaticTagNames = value.split("\n").filter((line) => line.trim() !== "");
        this.plugin.saveSettings();
      }).then((textArea) => {
        textArea.inputEl.style.width = "100%";
        textArea.inputEl.rows = 5;
      });
    });
    new import_obsidian.Setting(containerEl).setName("Clear all tags from project tasks").setDesc("When clearing tags from project tasks clear all existing tags not just the automatically added ones").addToggle((text) => text.setValue(this.plugin.settings.clearAllTags).onChange(async (value) => {
      this.plugin.settings.clearAllTags = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Nested tags behaviour").setDesc("Determines whether nested tags will create parallel execution tags or sequential").addDropdown((dropDown) => {
      dropDown.addOption("1", "Parallel Execution");
      dropDown.addOption("2", "Sequential Execution").setValue(this.plugin.settings.nestedTaskBehavior).onChange(async (value) => {
        this.plugin.settings.nestedTaskBehavior = value;
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJoZWxwZXJzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge0FwcCwgRWRpdG9yLCBNYXJrZG93bkZpbGVJbmZvLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmd9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBIZWxwZXIsIHtERUZBVUxUX1NFVFRJTkdTLCBOZXN0aW5nQmVoYXZpb3VyLCBQcmVmaXhNZXRob2QsIFByb2plY3RUYXNrc1NldHRpbmdzfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbi8vIFR1cm4gb24gdG8gYWxsb3cgZGVidWdnaW5nIGluIHRoZSBjb25zb2xlXG5jb25zdCBERUJVRyA9IHRydWU7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdFRhc2tzIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBzZXR0aW5nczogUHJvamVjdFRhc2tzU2V0dGluZ3M7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGlmIChERUJVRykgY29uc29sZS5sb2coJ1Byb2plY3QgVGFza3Mgc3RhcnRpbmcnKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJzZXQtaWRzXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlNldCBwcm9qZWN0IGlkcyBvbiBTZWxlY3Rpb25cIixcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBsZXQgbGluZXMgPSBIZWxwZXIuYWRkVGFza0lEcyhzZWwsIHRoaXMuZ2V0UHJlZml4KGVkaXRvciwgdmlldyksIHRoaXMuc2V0dGluZ3MuYXV0b21hdGljVGFnTmFtZXMsIHRoaXMuc2V0dGluZ3MubmVzdGVkVGFza0JlaGF2aW9yID09IE5lc3RpbmdCZWhhdmlvdXIuUGFyYWxsZWxFeGVjdXRpb24sIHRoaXMuc2V0dGluZ3MuaWRQcmVmaXhNZXRob2QgPT0gUHJlZml4TWV0aG9kLlVzZVByZWZpeCwgdGhpcy5zZXR0aW5ncy5yYW5kb21JRExlbmd0aCwgdGhpcy5zZXR0aW5ncy5zZXF1ZW50aWFsU3RhcnROdW1iZXIpO1xuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICBgJHtsaW5lc31gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImNsZWFyLWlkc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJDbGVhciBwcm9qZWN0IGlkcyBvbiBTZWxlY3Rpb25cIixcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBsZXQgbGluZXMgPSBIZWxwZXIuY2xlYXJCbG9ja0lEcyhzZWwsIHRoaXMuc2V0dGluZ3MuYXV0b21hdGljVGFnTmFtZXMsIHRoaXMuc2V0dGluZ3MuY2xlYXJBbGxUYWdzKTtcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgYCR7bGluZXN9YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJzZXQtaWRzLWJsb2NrXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlNldCBwcm9qZWN0IGlkcyBvbiBCbG9ja1wiLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3IsIHZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrVXBkYXRlKGVkaXRvciwgdGhpcy5nZXRQcmVmaXgoZWRpdG9yLCB2aWV3KSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImNsZWFyLWlkcy1ibG9ja1wiLFxuICAgICAgICAgICAgbmFtZTogXCJDbGVhciBwcm9qZWN0IGlkcyBvbiBCbG9ja1wiLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3IsIHZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrVXBkYXRlKGVkaXRvciwgdGhpcy5nZXRQcmVmaXgoZWRpdG9yLCB2aWV3KSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJhZGQtcHJvamVjdC10YXNrLWxpc3RcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQWRkIGFjdGl2ZSBwcm9qZWN0IHRhc2sgbGlzdFwiLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3IsIHZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFjdGl2ZVByb2plY3RMaXN0KGVkaXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcImNsZWFyLWlkcy1maWxlXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkNsZWFyIHByb2plY3QgaWRzIGluIGVudGlyZSBmaWxlXCIsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvciwgdmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBsYXN0X2xpbmUgPSBlZGl0b3IubGluZUNvdW50KClcbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2VfZnJvbSA9IHtsaW5lOiAwLCBjaDogMH1cbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2VfdG8gPSB7bGluZTogbGFzdF9saW5lLCBjaDogZWRpdG9yLmdldExpbmUobGFzdF9saW5lKS5sZW5ndGh9XG4gICAgICAgICAgICAgICAgbGV0IHNlbCA9IGVkaXRvci5nZXRSYW5nZShyYW5nZV9mcm9tLCByYW5nZV90byk7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmVzID0gSGVscGVyLmNsZWFyQmxvY2tJRHMoc2VsLCB0aGlzLnNldHRpbmdzLmF1dG9tYXRpY1RhZ05hbWVzLCB0aGlzLnNldHRpbmdzLmNsZWFyQWxsVGFncyk7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICAgICAgICAgICAgICAgICAgYCR7bGluZXN9YCxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VfZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VfdG9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUHJvamVjdFRhc2tzU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgIH1cblxuICAgIGFkZEFjdGl2ZVByb2plY3RMaXN0KGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIC8vIEEgdmlldyB0byBzaG93IGFjdGl2ZSB0YXNrc1xuICAgICAgICBjb25zdCBhY3RpdmVfdGFza3NfdmlldyA9IGBcXGBcXGBcXGB0YXNrc1xudGFncyBpbmNsdWRlcyAjJHt0aGlzLnNldHRpbmdzLmF1dG9tYXRpY1RhZ05hbWVzfVxubm90IGRvbmVcbmhpZGUgYmFja2xpbmtcbmlzIG5vdCBibG9ja2VkXG5cXGBcXGBcXGBgO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihhY3RpdmVfdGFza3Nfdmlldyk7XG4gICAgfVxuXG4gICAgYmxvY2tVcGRhdGUoZWRpdG9yOiBFZGl0b3IsIHByZWZpeDogc3RyaW5nLCBhZGRfaWRzOiBib29sZWFuKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcblxuICAgICAgICAvLyBHZXQgdGhlIGJsb2NrIGJvdW5kYXJpZXNcbiAgICAgICAgbGV0IGJsb2NrU3RhcnQgPSBIZWxwZXIuZ2V0QmxvY2tTdGFydChlZGl0b3IpO1xuICAgICAgICBsZXQgYmxvY2tFbmQgPSBIZWxwZXIuZ2V0QmxvY2tFbmQoZWRpdG9yKTtcbiAgICAgICAgbGV0IGxhc3RfbGluZV9sZW5ndGggPSBlZGl0b3IuZ2V0TGluZShibG9ja0VuZCArIDEpLmxlbmd0aDtcblxuICAgICAgICBjb25zdCBibG9ja0NvbnRlbnQgPSBlZGl0b3IuZ2V0UmFuZ2Uoe2xpbmU6IGJsb2NrU3RhcnQsIGNoOiAwfSwge2xpbmU6IGJsb2NrRW5kLCBjaDogbGFzdF9saW5lX2xlbmd0aH0pO1xuICAgICAgICBpZiAoREVCVUcpIGNvbnNvbGUubG9nKGBTdGFydCAke2Jsb2NrU3RhcnR9LCBFbmQgJHtibG9ja0VuZH0sIGxhc3QgbGVuZ3RoICR7bGFzdF9saW5lX2xlbmd0aH1cXG5PcmlnOiAke2Jsb2NrQ29udGVudH1gKTtcblxuICAgICAgICBsZXQgbGluZXM7XG4gICAgICAgIGlmIChhZGRfaWRzKSB7XG4gICAgICAgICAgICBsaW5lcyA9IEhlbHBlci5hZGRUYXNrSURzKGJsb2NrQ29udGVudCwgcHJlZml4LCB0aGlzLnNldHRpbmdzLmF1dG9tYXRpY1RhZ05hbWVzLCB0aGlzLnNldHRpbmdzLm5lc3RlZFRhc2tCZWhhdmlvciA9PSBOZXN0aW5nQmVoYXZpb3VyLlBhcmFsbGVsRXhlY3V0aW9uLCB0aGlzLnNldHRpbmdzLmlkUHJlZml4TWV0aG9kID09IFByZWZpeE1ldGhvZC5Vc2VQcmVmaXgsIHRoaXMuc2V0dGluZ3MucmFuZG9tSURMZW5ndGgsIHRoaXMuc2V0dGluZ3Muc2VxdWVudGlhbFN0YXJ0TnVtYmVyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGluZXMgPSBIZWxwZXIuY2xlYXJCbG9ja0lEcyhibG9ja0NvbnRlbnQsIHRoaXMuc2V0dGluZ3MuYXV0b21hdGljVGFnTmFtZXMsIHRoaXMuc2V0dGluZ3MuY2xlYXJBbGxUYWdzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChERUJVRykgY29uc29sZS5sb2coYFN0YXJ0ICR7YmxvY2tTdGFydH0sIEVuZCAke2Jsb2NrRW5kfSwgbGFzdCBsZW5ndGggJHtsYXN0X2xpbmVfbGVuZ3RofVxcbk9yaWc6ICR7YmxvY2tDb250ZW50fVxcbk5ldzogJHtsaW5lc31gKTtcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShsaW5lcywge2xpbmU6IGJsb2NrU3RhcnQsIGNoOiAwfSwge2xpbmU6IGJsb2NrRW5kLCBjaDogbGFzdF9saW5lX2xlbmd0aH0pO1xuICAgIH1cblxuICAgIGdldFByZWZpeChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25GaWxlSW5mbykge1xuICAgICAgICBsZXQgcmF3X3ByZWZpeDtcbiAgICAgICAgc3dpdGNoICh0aGlzLnNldHRpbmdzLmlkUHJlZml4TWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlIFByZWZpeE1ldGhvZC5Vc2VQcmVmaXg6IHtcbiAgICAgICAgICAgICAgICByYXdfcHJlZml4ID0gdGhpcy5zZXR0aW5ncy5wcm9qZWN0UHJlZml4O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBQcmVmaXhNZXRob2QuRmlsZU5hbWU6IHtcbiAgICAgICAgICAgICAgICByYXdfcHJlZml4ID0gdGhpcy5nZXRGaWxlbmFtZSh2aWV3KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgUHJlZml4TWV0aG9kLlNlY3Rpb25OYW1lOiB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgdGhlIG5hbWUgb2YgdGhlIGJsb2NrIHRoYXQgY29udGFpbnMgdGhlIGN1cnNvciBvciB0aGUgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgcmF3X3ByZWZpeCA9IEhlbHBlci5nZXRTZWN0aW9uTmFtZShlZGl0b3IsIHRoaXMuZ2V0RmlsZW5hbWUodmlldykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBIZWxwZXIuZ2V0UHJlZml4RnJvbVN0cmluZyhyYXdfcHJlZml4LCB0aGlzLnNldHRpbmdzLmZpcnN0TGV0dGVyc09mV29yZHMsIHRoaXMuc2V0dGluZ3MucmVtb3ZlVm93ZWxzKTtcbiAgICB9XG5cbiAgICBnZXRGaWxlbmFtZSh2aWV3OiBNYXJrZG93bkZpbGVJbmZvKSB7XG4gICAgICAgIGlmICghdmlldy5maWxlPy5uYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wcm9qZWN0UHJlZml4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZpZXcuZmlsZS5uYW1lLnNwbGl0KCcuJylbMF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcblxuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbn1cblxuXG5jbGFzcyBQcm9qZWN0VGFza3NTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogUHJvamVjdFRhc2tzO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUHJvamVjdFRhc2tzKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdQcm9qZWN0IElEIG1ldGhvZCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGhvdyB0aGUgSUQgd2lsbCBiZSBkZXRlcm1pbmVkJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wRG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcERvd24uYWRkT3B0aW9uKCcxJywgJ1VzZSBwcmVmaXgnKTtcbiAgICAgICAgICAgICAgICBkcm9wRG93bi5hZGRPcHRpb24oJzInLCAnVXNlIFNlY3Rpb24gbmFtZScpO1xuICAgICAgICAgICAgICAgIGRyb3BEb3duLmFkZE9wdGlvbignMycsICdVc2UgZmlsZW5hbWUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWRQcmVmaXhNZXRob2QpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlkUHJlZml4TWV0aG9kID0gdmFsdWUgYXMgUHJlZml4TWV0aG9kO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdQcm9qZWN0IElEIHByZWZpeCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnUHJlZml4IHRvIHVzZSB3aGVuIGNyZWF0aW5nIGFuIElEIGZvciBhIHRhc2snKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdJRCBwcmVmaXgnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0UHJlZml4KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvamVjdFByZWZpeCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTGVuZ3RoIG9mIHJhbmRvbSBJRCBudW1iZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0hvdyBtYW55IGRpZ2l0cyB0byB1c2UgZm9yIHJhbmRvbSBJRCB3aGVuIHVzaW5nIGEgZml4ZWQgcHJlZml4JylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJhbmRvbUlETGVuZ3RoKVxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMywgNiwgMSlcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmFuZG9tSURMZW5ndGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0luaXRpYWwgc2VxdWVudGlhbCBJRCBudW1iZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1N0YXJ0IG51bWJlciBmb3Igc2VxdWVudGlhbCBJRFxcJ3MnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcih0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VxdWVudGlhbFN0YXJ0TnVtYmVyKVxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMCwgMSwgMSlcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VxdWVudGlhbFN0YXJ0TnVtYmVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdSZW1vdmUgdm93ZWxzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdSZW1vdmUgdm93ZWxzIGZyb20gdGhlIHByZWZpeCB3aGVuIGdldHRpbmcgZnJvbSB0aGUgZmlsZW5hbWUgb3IgYmxvY2sgbmFtZScpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVWb3dlbHMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVWb3dlbHMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZpcnN0IGxldHRlciBvZiB3b3JkcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnT25seSB1c2UgdGhlIGZpcnN0IGxldHRlciBvZiB3b3JkcyB0byBmb3JtIHRoZSBwcmVmaXgnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlyc3RMZXR0ZXJzT2ZXb3JkcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0TGV0dGVyc09mV29yZHMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQXV0b21hdGljYWxseSBhZGQgdGFncycpXG4gICAgICAgICAgICAuc2V0RGVzYygnQSBsaXN0IG9mIHRhZ3MgKG9uZSBwZXIgbGluZSkgdG8gYWRkIHRvIGVhY2ggdGFzayAtIGRvIG5vdCBpbmNsdWRlIHRoZSAjIHN5bWJvbCcpXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9tYXRpY1RhZ05hbWVzLmpvaW4oJ1xcbicpKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvbWF0aWNUYWdOYW1lcyA9IHZhbHVlLnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4odGV4dEFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwucm93cyA9IDU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdDbGVhciBhbGwgdGFncyBmcm9tIHByb2plY3QgdGFza3MnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1doZW4gY2xlYXJpbmcgdGFncyBmcm9tIHByb2plY3QgdGFza3MgY2xlYXIgYWxsIGV4aXN0aW5nIHRhZ3Mgbm90IGp1c3QgdGhlIGF1dG9tYXRpY2FsbHkgYWRkZWQgb25lcycpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGVhckFsbFRhZ3MpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGVhckFsbFRhZ3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05lc3RlZCB0YWdzIGJlaGF2aW91cicpXG4gICAgICAgICAgICAuc2V0RGVzYygnRGV0ZXJtaW5lcyB3aGV0aGVyIG5lc3RlZCB0YWdzIHdpbGwgY3JlYXRlIHBhcmFsbGVsIGV4ZWN1dGlvbiB0YWdzIG9yIHNlcXVlbnRpYWwnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3BEb3duID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wRG93bi5hZGRPcHRpb24oJzEnLCAnUGFyYWxsZWwgRXhlY3V0aW9uJyk7XG4gICAgICAgICAgICAgICAgZHJvcERvd24uYWRkT3B0aW9uKCcyJywgJ1NlcXVlbnRpYWwgRXhlY3V0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5lc3RlZFRhc2tCZWhhdmlvcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubmVzdGVkVGFza0JlaGF2aW9yID0gdmFsdWUgYXMgTmVzdGluZ0JlaGF2aW91cjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgfVxufVxuXG4iLCAiLy8gUmVnZXggZm9yIGJsb2NrIGJvdW5kYXJ5XG5jb25zdCBCTE9DS19CT1VOREFSWSA9IC9eIytcXHMvO1xuY29uc3QgREVCVUcgPSB0cnVlO1xuXG5cbmV4cG9ydCBlbnVtIFByZWZpeE1ldGhvZCB7XG4gICAgVXNlUHJlZml4ID0gJzEnLFxuICAgIFNlY3Rpb25OYW1lID0gJzInLFxuICAgIEZpbGVOYW1lID0gJzMnXG59XG5cbmV4cG9ydCBlbnVtIE5lc3RpbmdCZWhhdmlvdXIge1xuICAgIFBhcmFsbGVsRXhlY3V0aW9uID0gJzEnLFxuICAgIFNlcXVlbnRpYWxFeGVjdXRpb24gPSAnMicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvamVjdFRhc2tzU2V0dGluZ3Mge1xuICAgIGlkUHJlZml4TWV0aG9kOiBQcmVmaXhNZXRob2Q7XG4gICAgcHJvamVjdFByZWZpeDogc3RyaW5nO1xuICAgIHJhbmRvbUlETGVuZ3RoOiBudW1iZXI7XG4gICAgc2VxdWVudGlhbFN0YXJ0TnVtYmVyOiBudW1iZXI7XG4gICAgcmVtb3ZlVm93ZWxzOiBib29sZWFuO1xuICAgIGZpcnN0TGV0dGVyc09mV29yZHM6IGJvb2xlYW47XG4gICAgYXV0b21hdGljVGFnTmFtZXM6IHN0cmluZ1tdO1xuICAgIGNsZWFyQWxsVGFnczogYm9vbGVhbjtcbiAgICBuZXN0ZWRUYXNrQmVoYXZpb3I6IE5lc3RpbmdCZWhhdmlvdXI7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQcm9qZWN0VGFza3NTZXR0aW5ncyA9IHtcbiAgICBpZFByZWZpeE1ldGhvZDogUHJlZml4TWV0aG9kLlVzZVByZWZpeCxcbiAgICBwcm9qZWN0UHJlZml4OiAncHJqJyxcbiAgICByYW5kb21JRExlbmd0aDogNixcbiAgICBzZXF1ZW50aWFsU3RhcnROdW1iZXI6IDEsXG4gICAgcmVtb3ZlVm93ZWxzOiBmYWxzZSxcbiAgICBmaXJzdExldHRlcnNPZldvcmRzOiBmYWxzZSxcbiAgICBhdXRvbWF0aWNUYWdOYW1lczogW1wiUHJvamVjdFwiXSxcbiAgICBjbGVhckFsbFRhZ3M6IGZhbHNlLFxuICAgIG5lc3RlZFRhc2tCZWhhdmlvcjogTmVzdGluZ0JlaGF2aW91ci5QYXJhbGxlbEV4ZWN1dGlvbixcbn1cblxuaW50ZXJmYWNlIFNpbXBsZUN1cnNvciB7XG4gICAgbGluZTogbnVtYmVyXG59XG5cbmludGVyZmFjZSBTaW1wbGVFZGl0b3Ige1xuICAgIC8vIFRoaXMgaW50ZXJmYWNlIGlzIGNyZWF0ZWQgdG8gaGVscCB3aXRoIHRoZSBmdW5jdGlvbnMgaGVyZSB0aGF0IG5lZWQgdGhlIE9ic2lkaWFuIEVkaXRvclxuICAgIGdldEN1cnNvcigpOiBTaW1wbGVDdXJzb3I7XG4gICAgZ2V0TGluZShuOiBudW1iZXIpOiBzdHJpbmc7XG4gICAgbGluZUNvdW50KCk6IG51bWJlcjtcbiAgICBnZXRSYW5nZShzdGFydDoge2xpbmU6IG51bWJlciwgY2g6IG51bWJlcn0sIGVuZDoge2xpbmU6IG51bWJlciwgY2g6IG51bWJlcn0pOiBzdHJpbmc7XG4gICAgcmVwbGFjZVJhbmdlKHRleHQ6IHN0cmluZywgc3RhcnQ6IHtsaW5lOiBudW1iZXIsIGNoOiBudW1iZXJ9LCBlbmQ6IHtsaW5lOiBudW1iZXIsIGNoOiBudW1iZXJ9KTogdm9pZDtcbn1cblxuLy8gVG9EbzogbmVlZCB0byByZWZhY3RvciB0byBhbGxvdyBwYXNzaW5nIHRoZSBzZXR0aW5ncyBvYmplY3QgYXJvdW5kIHNvIHRoYXQgd2UgY2FuIG1vcmUgZWFzaWx5IGJyZWFrIGFwYXJ0IHRoZSBkb0Jsb2NrVXBkYXRlXG5cblxuY2xhc3MgUGFyc2VkTGluZSB7XG4gICAgcHVibGljIHRhc2tfcHJlZml4OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgaXNfdGFzazogYm9vbGVhbiwgcHVibGljIHN0YXR1c190eXBlOiBzdHJpbmcsIHB1YmxpYyBsaW5lX3RleHQ6IHN0cmluZyxcbiAgICAgICAgICAgICAgICBwdWJsaWMgbmVzdGluZzogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzX3Rhc2spIHtcbiAgICAgICAgICAgIGxldCBpbmRlbnRzID0gJ1xcdCcucmVwZWF0KG5lc3RpbmcpO1xuICAgICAgICAgICAgdGhpcy50YXNrX3ByZWZpeCA9IGAke2luZGVudHN9LSBbJHtzdGF0dXNfdHlwZX1dIGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhc2tfcHJlZml4ID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMaW5lU3BsaXQobGluZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBsaW5lLnNwbGl0KC8oXFxzKykvKTtcbiAgICB9XG5cbiAgICByZW1vdmVBbGxUYWdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVUYWdzKCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlVGFncyh0YWdzX3RvX3JlbW92ZT86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCB3b3JkcyA9IHRoaXMuZ2V0TGluZVNwbGl0KHRoaXMubGluZV90ZXh0KTtcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgd29yZHMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgbGV0IHdvcmQgPSB3b3Jkc1tpZHhdO1xuICAgICAgICAgICAgaWYgKHdvcmQudHJpbSgpLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gSXQgaXMgYSB2YWxpZCB0YWcgd2Ugc2hvdWxkIGJlIHJlbW92aW5nXG4gICAgICAgICAgICAgICAgbGV0IGlzX3ZhbGlkX3RhZyA9IHdvcmQuc3RhcnRzV2l0aCgnIycpICYmICghdGFnc190b19yZW1vdmUgfHwgdGFnc190b19yZW1vdmUuaW5kZXhPZih3b3JkLnNsaWNlKDEpKSA+PSAwKVxuICAgICAgICAgICAgICAgIGlmIChpc192YWxpZF90YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgaXMgYSB0YWcsIHNvIGRvIG5vdCBpbmNsdWRlIGl0IGFuZCBlYXQgdGhlIHByZXZpb3VzIG9yIGZvbGxvd2luZyB3aGl0ZXNwYWNlXG4gICAgICAgICAgICAgICAgICAgIHdvcmRzW2lkeF0gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3Jkc1tpZHggLSAxXSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlkeCAhPSB3b3Jkcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3Jkc1tpZHggKyAxXSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdhcyB3aGl0ZXNwYWNlXG4gICAgICAgICAgICAgICAgaWYgKGlkeCA9PSB3b3Jkcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHNob3VsZCBpZ25vcmUgdGhpc1xuICAgICAgICAgICAgICAgICAgICB3b3Jkc1tpZHhdID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3b3Jkcy5qb2luKCcnKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbHBlciB7XG4gICAgLy8gU2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGNvbnRhaW5zIHRoZSBidXNpbmVzcyBsb2dpY1xuICAgIC8vIG9mIHRoZSBhcHAuIFRoaXMgaXMgZXh0cmFjdGVkIGhlcmUgdG8gYWxsb3cgdW5pdCB0ZXN0aW5nXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldE5lc3RpbmdMZXZlbCh0YXNrX21hcmtlcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgLy8gVGhlIG5lc3RpbmcgbGV2ZWwgaXMgdGhlIG51bWJlciBvZiBzcGFjZXMgYmVmb3JlIHRoZSBmaXJzdCBcIi1cIiBjaGFyYWN0ZXJcbiAgICAgICAgbGV0IHBhcnRzID0gdGFza19tYXJrZXIucmVwbGFjZUFsbChcIlxcblwiLCBcIlwiKS5zcGxpdChcIi1cIik7XG4gICAgICAgIHJldHVybiBwYXJ0c1swXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgc3RhdGljIGdlbmVyYXRlUmFuZG9tRGlnaXRzKGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGRpZ2l0cyA9ICcwMTIzNDU2Nzg5JztcbiAgICAgIGxldCByYW5kb21TdHJpbmcgPSAnJztcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpZ2l0cy5sZW5ndGgpO1xuICAgICAgICByYW5kb21TdHJpbmcgKz0gZGlnaXRzW3JhbmRvbUluZGV4XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJhbmRvbVN0cmluZztcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0UHJlZml4RnJvbVN0cmluZyh0ZXh0OiBzdHJpbmcsIGZpcnN0X2xldHRlcnM6IGJvb2xlYW4sIHJlbW92ZV92b3dlbHM6IGJvb2xlYW4pIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBzcGVjaWFsIHNpZ25zXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2VBbGwoL1sjXFxbXFxdXS9nLCAnJyk7XG4gICAgICAgIC8vIEJyZWFrIGludG8gd29yZHNcbiAgICAgICAgbGV0IHdvcmRzID0gdGV4dC5zcGxpdCgvXFxzKy8pO1xuICAgICAgICB0ZXh0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgICAgaWYgKHdvcmQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0ke3dvcmRbMF0udG9VcHBlckNhc2UoKX1gO1xuICAgICAgICAgICAgICAgIGlmICghZmlyc3RfbGV0dGVycykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVtYWluZGVyID0gd29yZC5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHZvd2VscyBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZV92b3dlbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFpbmRlciA9IHJlbWFpbmRlci5yZXBsYWNlQWxsKC9bYWVpb3VdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gYCR7dGV4dH0ke3JlbWFpbmRlcn1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgc3BhY2VzXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2VBbGwoJyAnLCAnJyk7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cblxuICAgIHN0YXRpYyBjbGVhckJsb2NrSURzKHNlbDogc3RyaW5nLCBhdXRvbWF0aWNfdGFnczogc3RyaW5nW10sIGNsZWFyX2FsbF90YWdzOiBib29sZWFuKSB7XG4gICAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBJRCdzXG4gICAgICAgIGxldCByZW1vdmVfaWQgPSAvXHVEODNDXHVERDk0XFxzW1xcdyxdK1sgXFx0XSovZztcbiAgICAgICAgc2VsID0gc2VsLnJlcGxhY2VBbGwocmVtb3ZlX2lkLCAnJyk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIEJsb2Nrc1xuICAgICAgICBsZXQgcmVtb3ZlX2Jsb2NrID0gL1x1MjZENFxcc1tcXHcsXStbIFxcdF0qL2c7XG4gICAgICAgIHNlbCA9IHNlbC5yZXBsYWNlQWxsKHJlbW92ZV9ibG9jaywgJycpO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgdGFnc1xuICAgICAgICBsZXQgY2xlYW5lZF90ZXh0ID0gW107XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2Ygc2VsLnNwbGl0KC9cXHI/XFxuLykpIHtcbiAgICAgICAgICAgIGxldCBwYXJzZWQgPSB0aGlzLnBhcnNlTGluZShsaW5lKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXNfdGFzaykge1xuICAgICAgICAgICAgICAgIGlmIChjbGVhcl9hbGxfdGFncykge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbmVkX3RleHQucHVzaChwYXJzZWQudGFza19wcmVmaXggKyBwYXJzZWQucmVtb3ZlQWxsVGFncygpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbmVkX3RleHQucHVzaChwYXJzZWQudGFza19wcmVmaXggKyBwYXJzZWQucmVtb3ZlVGFncyhhdXRvbWF0aWNfdGFncykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYW5lZF90ZXh0LnB1c2gocGFyc2VkLmxpbmVfdGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xlYW5lZF90ZXh0LmpvaW4oJ1xcbicpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRCbG9ja0VuZChlZGl0b3I6IFNpbXBsZUVkaXRvcikge1xuICAgICAgICAvLyBGaW5kIHRoZSBlbmQgb2YgdGhlIGJsb2NrXG4gICAgICAgIGxldCBibG9ja0VuZCA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lO1xuICAgICAgICBpZiAoYmxvY2tFbmQgPj0gZWRpdG9yLmxpbmVDb3VudCgpIC0gMSkgcmV0dXJuIGJsb2NrRW5kICsgMTtcbiAgICAgICAgYmxvY2tFbmQgKz0gMTtcbiAgICAgICAgd2hpbGUgKCFCTE9DS19CT1VOREFSWS50ZXN0KGVkaXRvci5nZXRMaW5lKGJsb2NrRW5kKSkpIHtcbiAgICAgICAgICAgIGJsb2NrRW5kKys7XG4gICAgICAgICAgICBpZiAoYmxvY2tFbmQgPiBlZGl0b3IubGluZUNvdW50KCkgLSAxKSByZXR1cm4gYmxvY2tFbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJsb2NrRW5kO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRCbG9ja1N0YXJ0KGVkaXRvcjogU2ltcGxlRWRpdG9yKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIHN0YXJ0IG9mIHRoZSBibG9ja1xuICAgICAgICBsZXQgYmxvY2tTdGFydCA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lO1xuICAgICAgICBpZiAoQkxPQ0tfQk9VTkRBUlkudGVzdChlZGl0b3IuZ2V0TGluZShibG9ja1N0YXJ0KSkpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihlZGl0b3IubGluZUNvdW50KCkgLTEsIGJsb2NrU3RhcnQgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoYmxvY2tTdGFydCA+IDAgJiYgIUJMT0NLX0JPVU5EQVJZLnRlc3QoZWRpdG9yLmdldExpbmUoYmxvY2tTdGFydCAtIDEpKSkge1xuICAgICAgICAgICAgYmxvY2tTdGFydC0tO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBibG9ja1N0YXJ0O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRBbGxCbG9ja1N0YXJ0cyhlZGl0b3I6IFNpbXBsZUVkaXRvcikge1xuICAgICAgICAvLyBSZXR1cm4gYWxsIHRoZSBsaW5lcyB0aGF0IG1hcmsgdGhlIHN0YXJ0IG9mIGEgYmxvY2sgaW4gYSBmaWxlXG4gICAgICAgIGxldCBibG9ja3MgPSBbMF07XG4gICAgICAgIGxldCBzZWN0aW9uID0gL14jP1xcc1xcdysvXG4gICAgICAgIGZvciAobGV0IGxpbmVfbnVtYmVyID0gMDsgbGluZV9udW1iZXIgPCBlZGl0b3IubGluZUNvdW50KCk7IGxpbmVfbnVtYmVyKyspIHtcbiAgICAgICAgICAgIGlmIChzZWN0aW9uLnRlc3QoZWRpdG9yLmdldExpbmUobGluZV9udW1iZXIpKSkge1xuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIHRoZSBmaXJzdCBsaW5lIGlzIGEgc2VjdGlvbiB3ZSBkb24ndCBoYXZlIHRvIGFkZCBpdFxuICAgICAgICAgICAgICAgIGlmIChsaW5lX251bWJlciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzLnB1c2gobGluZV9udW1iZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBibG9ja3M7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFNlY3Rpb25OYW1lKGVkaXRvcjogU2ltcGxlRWRpdG9yLCBmaWxlX25hbWU6IHN0cmluZykge1xuICAgICAgICBsZXQgc2VjdGlvbl9zdGFydCA9IEhlbHBlci5nZXRCbG9ja1N0YXJ0KGVkaXRvcik7XG4gICAgICAgIGlmIChzZWN0aW9uX3N0YXJ0ID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxlX25hbWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBlZGl0b3IuZ2V0TGluZShzZWN0aW9uX3N0YXJ0LTEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZFRhc2tJRHMoc2VsOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nLCBhdXRvbWF0aWNfdGFnczogc3RyaW5nW10sIHBhcmFsbGVsOiBib29sZWFuLCB1c2VfcHJlZml4OiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbV9pZF9sZW5ndGg6IG51bWJlciwgc2VxdWVudGlhbF9zdGFydDogbnVtYmVyKSB7XG4gICAgICAgIC8vIENsZWFyIGFsbCB0aGUgZXhpc3RpbmcgYmxvY2sgYW5kIHByb2plY3QgSUQnc1xuICAgICAgICBzZWwgPSBIZWxwZXIuY2xlYXJCbG9ja0lEcyhzZWwsIGF1dG9tYXRpY190YWdzLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKERFQlVHKSBjb25zb2xlLmxvZyhgUmVwbGFjZWQgaWRzIGFuZCBibG9ja3MgdG8gZ2l2ZTogJHtzZWx9YCk7XG5cbiAgICAgICAgbGV0IGxpbmVzID0gXCJcIjtcbiAgICAgICAgbGV0IGZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgbGV0IGlkeCA9IDA7XG4gICAgICAgIGxldCBuZXN0aW5nX2lkcyA9IFtcIjA6RVJST1IhXCJdO1xuICAgICAgICBsZXQgY3VycmVudF9uZXN0aW5nID0gMDtcbiAgICAgICAgbGV0IGlzX3BhcmFsbGVsID0gZmFsc2U7XG4gICAgICAgIGxldCB0aGlzX2lkO1xuXG4gICAgICAgIC8vIEdvIHRocm91Z2ggYWxsIHRoZSBsaW5lcyBhbmQgYWRkIGFwcHJvcHJpYXRlIElEIGFuZCBibG9jayB0YWdzXG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBzZWwuc3BsaXQoL1xccj9cXG4vKSkge1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5wYXJzZUxpbmUobGluZSk7XG4gICAgICAgICAgICBpZiAoIWZpcnN0KSB7XG4gICAgICAgICAgICAgICAgbGluZXMgKz0gXCJcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElzIHRoaXMgYSB0YXNrIGxpbmUgYXQgYWxsP1xuICAgICAgICAgICAgaWYgKG1hdGNoLmlzX3Rhc2spIHtcbiAgICAgICAgICAgICAgICAvLyBXYXRjaCBvdXQgZm9yIGNoYW5nZXMgaW4gbmVzdGluZ1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbGxlbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmVzdGluZ19kZXB0aCA9IG1hdGNoLm5lc3Rpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXN0aW5nX2RlcHRoID4gY3VycmVudF9uZXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBuZXcgbGV2ZWwgb2YgbmVzdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9uZXN0aW5nICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc19wYXJhbGxlbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXN0aW5nX2lkcy5wdXNoKGBgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXN0aW5nX2RlcHRoIDwgY3VycmVudF9uZXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGV2ZWxzIG9mIG5lc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50X25lc3RpbmcgPiBuZXN0aW5nX2RlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9uZXN0aW5nIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5lc3RlZCA9IG5lc3RpbmdfaWRzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGluZ19pZHNbbmVzdGluZ19pZHMubGVuZ3RoIC0gMV0gKz0gYCwke25lc3RlZH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19wYXJhbGxlbCA9IGN1cnJlbnRfbmVzdGluZyA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRoaXNfbGluZTtcbiAgICAgICAgICAgICAgICAvLyBHZXQgYW4gaWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgaWYgKHVzZV9wcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc19pZCA9IGAke3ByZWZpeH0ke0hlbHBlci5nZW5lcmF0ZVJhbmRvbURpZ2l0cyhyYW5kb21faWRfbGVuZ3RoKX1gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNfaWQgPSBgJHtwcmVmaXh9JHtpZHggKyBzZXF1ZW50aWFsX3N0YXJ0fWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgaWQgaW50byB0aGVyZVxuICAgICAgICAgICAgICAgIGxldCBjbGVhbmVkX2xpbmUgPSBtYXRjaC5saW5lX3RleHQ7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgc3BhY2UgYXQgdGhlIGVuZCBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICBpZiAoY2xlYW5lZF9saW5lICE9IFwiXCIpIGNsZWFuZWRfbGluZSArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICB0aGlzX2xpbmUgPSBgJHttYXRjaC50YXNrX3ByZWZpeH0ke2NsZWFuZWRfbGluZX1cdUQ4M0NcdUREOTQgJHt0aGlzX2lkfWA7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBibG9ja3MgYWZ0ZXIgdGhlIHZlcnkgZmlyc3QgdGFza1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNfcGFyYWxsZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfbGluZSArPSBgIFx1MjZENCAke25lc3RpbmdfaWRzW2N1cnJlbnRfbmVzdGluZyAtIDFdfWA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzX2xpbmUgKz0gYCBcdTI2RDQgJHtuZXN0aW5nX2lkc1tuZXN0aW5nX2lkcy5sZW5ndGggLSAxXX1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGFuIGF1dG9tYXRpYyB0YWcgaWYgd2UgbmVlZCBpdFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIGF1dG9tYXRpY190YWdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWdfdGV4dCA9IGAgIyR7dGFnfWA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzX2xpbmUuaW5kZXhPZih0YWdfdGV4dCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzX2xpbmUgKz0gdGFnX3RleHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhpcyBsaW5lXG4gICAgICAgICAgICAgICAgbGluZXMgKz0gdGhpc19saW5lO1xuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgICAgIGlmIChpc19wYXJhbGxlbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGluZ19pZHNbbmVzdGluZ19pZHMubGVuZ3RoIC0gMV0pIG5lc3RpbmdfaWRzW25lc3RpbmdfaWRzLmxlbmd0aCAtIDFdICs9IFwiLFwiO1xuICAgICAgICAgICAgICAgICAgICBuZXN0aW5nX2lkc1tuZXN0aW5nX2lkcy5sZW5ndGggLSAxXSArPSBgJHt0aGlzX2lkfWA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmVzdGluZ19pZHNbbmVzdGluZ19pZHMubGVuZ3RoIC0gMV0gPSB0aGlzX2lkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoREVCVUcpIGNvbnNvbGUubG9nKGBOZXN0aW5nIGxldmVsICR7Y3VycmVudF9uZXN0aW5nfSwgaWRzICR7bmVzdGluZ19pZHN9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vdCBhIHRhc2sgbGluZSBzbyBqdXN0IGtlZXAgaXQgYXMgaXNcbiAgICAgICAgICAgICAgICBsaW5lcyArPSBtYXRjaC5saW5lX3RleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5lcztcbiAgICB9XG5cbiAgICBzdGF0aWMgZG9CbG9ja1VwZGF0ZShlZGl0b3I6IFNpbXBsZUVkaXRvciwgYWRkX2lkczogYm9vbGVhbiwgZmlsZW5hbWU6IHN0cmluZywgYXV0b21hdGljX3RhZ3M6IHN0cmluZ1tdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeDogc3RyaW5nLCBwYXJhbGxlbDogYm9vbGVhbiwgdXNlX3ByZWZpeDogYm9vbGVhbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5kb21faWRfbGVuZ3RoOiBudW1iZXIsIHNlcXVlbnRpYWxfc3RhcnQ6IG51bWJlciwgY2xlYXJfYWxsX3RhZ3M6IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICBjb25zdCBsaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgYmxvY2sgYm91bmRhcmllc1xuICAgICAgICBsZXQgYmxvY2tTdGFydCA9IEhlbHBlci5nZXRCbG9ja1N0YXJ0KGVkaXRvcik7XG4gICAgICAgIGxldCBibG9ja0VuZCA9IEhlbHBlci5nZXRCbG9ja0VuZChlZGl0b3IpO1xuICAgICAgICBsZXQgbGFzdF9saW5lX2xlbmd0aCA9IGVkaXRvci5nZXRMaW5lKGJsb2NrRW5kICsgMSkubGVuZ3RoO1xuXG4gICAgICAgIGNvbnN0IGJsb2NrQ29udGVudCA9IGVkaXRvci5nZXRSYW5nZSh7bGluZTogYmxvY2tTdGFydCwgY2g6IDB9LCB7bGluZTogYmxvY2tFbmQsIGNoOiBsYXN0X2xpbmVfbGVuZ3RofSk7XG4gICAgICAgIGlmIChERUJVRykgY29uc29sZS5sb2coYFN0YXJ0ICR7YmxvY2tTdGFydH0sIEVuZCAke2Jsb2NrRW5kfSwgbGFzdCBsZW5ndGggJHtsYXN0X2xpbmVfbGVuZ3RofVxcbk9yaWc6ICR7YmxvY2tDb250ZW50fWApO1xuXG4gICAgICAgIGxldCBsaW5lcztcbiAgICAgICAgaWYgKGFkZF9pZHMpIHtcbiAgICAgICAgICAgIGxpbmVzID0gSGVscGVyLmFkZFRhc2tJRHMoYmxvY2tDb250ZW50LCBwcmVmaXgsIGF1dG9tYXRpY190YWdzLCBwYXJhbGxlbCwgdXNlX3ByZWZpeCwgcmFuZG9tX2lkX2xlbmd0aCwgc2VxdWVudGlhbF9zdGFydClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpbmVzID0gSGVscGVyLmNsZWFyQmxvY2tJRHMoYmxvY2tDb250ZW50LCBhdXRvbWF0aWNfdGFncywgY2xlYXJfYWxsX3RhZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKERFQlVHKSBjb25zb2xlLmxvZyhgU3RhcnQgJHtibG9ja1N0YXJ0fSwgRW5kICR7YmxvY2tFbmR9LCBsYXN0IGxlbmd0aCAke2xhc3RfbGluZV9sZW5ndGh9XFxuT3JpZzogJHtibG9ja0NvbnRlbnR9XFxuTmV3OiAke2xpbmVzfWApO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGxpbmVzLCB7bGluZTogYmxvY2tTdGFydCwgY2g6IDB9LCB7bGluZTogYmxvY2tFbmQsIGNoOiBsYXN0X2xpbmVfbGVuZ3RofSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldEVudGlyZUNvbnZlcnRlZEZpbGUoZWRpdG9yOiBTaW1wbGVFZGl0b3IsIGZpbGVuYW1lOiBzdHJpbmcsIGF1dG9tYXRpY190YWdzOiBzdHJpbmdbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXg6IHN0cmluZywgcGFyYWxsZWw6IGJvb2xlYW4sIHVzZV9wcmVmaXg6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tX2lkX2xlbmd0aDogbnVtYmVyLCBzZXF1ZW50aWFsX3N0YXJ0OiBudW1iZXIsIGNsZWFyX2FsbF90YWdzOiBib29sZWFuKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBzdGF0aWMgcGFyc2VMaW5lKGxpbmU6IHN0cmluZykge1xuICAgICAgICBjb25zdCByZWdleCA9IC9eKFxccyotXFxzXFxbKFsgeFxcLVxcL10pXFxdXFxzKT8oLiopJC87XG4gICAgICAgIGxldCBtYXRjaCA9IHJlZ2V4LmV4ZWMobGluZSk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgLy8gV2FzIGFuIGV4cGVjdGVkIGxpbmVcbiAgICAgICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSB0YXNrIGxpbmVcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhcnNlZExpbmUodHJ1ZSwgbWF0Y2hbMl0sIG1hdGNoWzNdLCB0aGlzLmdldE5lc3RpbmdMZXZlbChsaW5lKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXNuJ3QgYSB0YXNrIGxpbmVcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhcnNlZExpbmUoZmFsc2UsICcnLCBtYXRjaFszXSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyBoZXJlXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExpbmUgd2FzIG5vdCB1bmRlcnN0b29kOiBcIiR7bGluZX1cImApO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQStFOzs7QUNDL0UsSUFBTSxpQkFBaUI7QUFDdkIsSUFBTSxRQUFRO0FBMEJQLElBQU0sbUJBQXlDO0FBQUEsRUFDbEQsZ0JBQWdCO0FBQUEsRUFDaEIsZUFBZTtBQUFBLEVBQ2YsZ0JBQWdCO0FBQUEsRUFDaEIsdUJBQXVCO0FBQUEsRUFDdkIsY0FBYztBQUFBLEVBQ2QscUJBQXFCO0FBQUEsRUFDckIsbUJBQW1CLENBQUMsU0FBUztBQUFBLEVBQzdCLGNBQWM7QUFBQSxFQUNkLG9CQUFvQjtBQUN4QjtBQWtCQSxJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQUdiLFlBQW1CLFNBQXlCLGFBQTRCLFdBQ3JELFNBQWlCO0FBRGpCO0FBQXlCO0FBQTRCO0FBQ3JEO0FB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S0FBSyxPQUFPLFNBQVMsWUFBWSxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUN2QixXQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNuQyxDQUFDLENBQUM7QUFFVixRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSx1QkFBdUIsRUFDL0IsUUFBUSx1REFBdUQsRUFDL0QsVUFBVSxVQUFRLEtBQ2QsU0FBUyxLQUFLLE9BQU8sU0FBUyxtQkFBbUIsRUFDakQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMsc0JBQXNCO0FBQzNDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNuQyxDQUFDLENBQUM7QUFHVixRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSx3QkFBd0IsRUFDaEMsUUFBUSxpRkFBaUYsRUFDekYsWUFBWSxDQUFDLFNBQVM7QUFDbkIsV0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixLQUFLLElBQUksQ0FBQyxFQUMxRCxTQUFTLENBQUMsVUFBVTtBQUNqQixhQUFLLE9BQU8sU0FBUyxvQkFBb0IsTUFBTSxNQUFNLElBQUksRUFBRSxPQUFPLFVBQVEsS0FBSyxLQUFLLE1BQU0sRUFBRTtBQUM1RixhQUFLLE9BQU8sYUFBYTtBQUFBLE1BQzdCLENBQUMsRUFBRSxLQUFLLGNBQVk7QUFDcEIsaUJBQVMsUUFBUSxNQUFNLFFBQVE7QUFDL0IsaUJBQVMsUUFBUSxPQUFPO0FBQUEsTUFDNUIsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUVMLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLG1DQUFtQyxFQUMzQyxRQUFRLHFHQUFxRyxFQUM3RyxVQUFVLFVBQVEsS0FDZCxTQUFTLEtBQUssT0FBTyxTQUFTLFlBQVksRUFDMUMsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMsZUFBZTtBQUNwQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDbkMsQ0FBQyxDQUFDO0FBRVYsUUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsdUJBQXVCLEVBQy9CLFFBQVEsa0ZBQWtGLEVBQzFGLFlBQVksY0FBWTtBQUNyQixlQUFTLFVBQVUsS0FBSyxvQkFBb0I7QUFDNUMsZUFBUyxVQUFVLEtBQUssc0JBQXNCLEVBQ3pDLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQWtCLEVBQ2hELFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGFBQUssT0FBTyxTQUFTLHFCQUFxQjtBQUMxQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDbkMsQ0FBQztBQUFBLElBQ1QsQ0FBQztBQUFBLEVBSVQ7QUFDSjsiLAogICJuYW1lcyI6IFsiREVCVUciXQp9Cg==
